<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>R Notebook HTML Format</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/textmate.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Markdown v2</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Authoring
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R Markdown</li>
    <li>
      <a href="authoring_quick_tour.html">Quick Tour</a>
    </li>
    <li>
      <a href="authoring_basics.html">Markdown Basics</a>
    </li>
    <li>
      <a href="authoring_pandoc_markdown.html">Pandoc Markdown</a>
    </li>
    <li>
      <a href="authoring_rcodechunks.html">R Code Chunks</a>
    </li>
    <li>
      <a href="authoring_bibliographies_and_citations.html">Bibliographies &amp; Citations</a>
    </li>
    <li>
      <a href="authoring_migrating_from_v1.html">Migrating from v1</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="http://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">Cheat Sheet [PDF]</a>
    </li>
    <li>
      <a href="http://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Reference Guide [PDF]</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Websites</li>
    <li>
      <a href="rmarkdown_websites.html">R Markdown Websites</a>
    </li>
    <li>
      <a href="rmarkdown_site_generators.html">Custom Site Generators</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Shiny</li>
    <li>
      <a href="authoring_shiny.html">Interactive Documents</a>
    </li>
    <li>
      <a href="authoring_embedded_shiny.html">Embedded Shiny Apps</a>
    </li>
    <li>
      <a href="authoring_shiny_widgets.html">Creating Shiny Widgets</a>
    </li>
    <li>
      <a href="authoring_shiny_advanced.html">Advanced Topics</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Formats
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Documents</li>
    <li>
      <a href="html_document_format.html">HTML</a>
    </li>
    <li>
      <a href="pdf_document_format.html">PDF</a>
    </li>
    <li>
      <a href="word_document_format.html">Word</a>
    </li>
    <li>
      <a href="odt_document_format.html">ODT</a>
    </li>
    <li>
      <a href="rtf_document_format.html">RTF</a>
    </li>
    <li>
      <a href="markdown_document_format.html">Markdown</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Presentations</li>
    <li>
      <a href="ioslides_presentation_format.html">ioslides</a>
    </li>
    <li>
      <a href="revealjs_presentation_format.html">reveal.js</a>
    </li>
    <li>
      <a href="slidy_presentation_format.html">Slidy</a>
    </li>
    <li>
      <a href="beamer_presentation_format.html">Beamer</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Notebooks</li>
    <li>
      <a href="r_notebooks.htm">R Notebooks</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Other</li>
    <li>
      <a href="tufte_handout_format.html">Tufte Handout</a>
    </li>
    <li>
      <a href="package_vignette_format.html">Package Vignette</a>
    </li>
    <li>
      <a href="github_document_format.html">GitHub Document</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Developer
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="developer_html_widgets.html">HTML Widgets</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="developer_parameterized_reports.html">Parameterized Reports</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="developer_document_templates.html">Document Templates</a>
    </li>
    <li>
      <a href="developer_custom_formats.html">Creating New Formats</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://github.com/rstudio/rmarkdown">R Markdown on GitHub</a>
    </li>
  </ul>
</li>
<li>
  <a href="articles.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/rmarkdown">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">R Notebook HTML Format</h1>

</div>


<p><strong>NOTE:</strong> The functions described in this article are available in the development version of the rmarkdown package. You can install the development version using the devtools package as follows:</p>
<pre class="r"><code>devtools::install_github(&quot;rstudio/markdown&quot;)</code></pre>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>This article describes the HTML notebook format, and is primarily intended for front-end applications using or embedding R, or other users who are interested in reading and writing documents using the R Notebook format.</p>
<p>R Notebooks are HTML documents with data written and encoded in such a way that:</p>
<ol style="list-style-type: decimal">
<li>The source <code>.Rmd</code> document can be recovered, and</li>
<li>Chunk outputs can be recovered.</li>
</ol>
<p>To generate an R Notebook, you can use <code>rmarkdown::render()</code> and specify the <code>html_notebook</code> output format in your document’s YAML metadata. Documents rendered in this form will be generated with the <code>.nb.html</code> file extension, to indicate that they are HTML notebooks.</p>
<p>To ensure chunk outputs can be recovered, the elements of the R Markdown document are enclosed with HTML comments, providing more information on the output. For example, chunk output might be serialized as:</p>
<pre><code>&lt;!-- rnb-chunk-begin --&gt;
&lt;!-- rnb-output-begin --&gt;
&lt;pre&gt;&lt;code&gt;Hello, World!&lt;/code&gt;&lt;/pre&gt;
&lt;!-- rnb-output-end --&gt;
&lt;!-- rnb-chunk-end --&gt;</code></pre>
<p>Because R Notebooks are just HTML documents, they can be opened and viewed in any web browser; in addition, hosting environments can be configured to recover and open the source <code>.Rmd</code> document, and also recover and display chunk outputs as appropriate.</p>
</div>
<div id="generating-r-notebooks-with-custom-output" class="section level2">
<h2>Generating R Notebooks with Custom Output</h2>
<p>It’s possible to render an HTML notebook with custom chunk outputs inserted in lieu of the result that would be generated by evaluating the associated R code. This can be useful for front-end editors that show the output of chunk execution inline, or for conversion programs from other notebook formats where output is already available from the source format. To facilitate this, one can provide a custom ‘output source’ to <code>rmarkdown::render()</code>. Let’s investigate with a simple example:</p>
<pre class="r"><code>rmd_stub &lt;- &quot;notebook/r-notebook-stub.Rmd&quot;
contents &lt;- readLines(rmd_stub)
cat(contents, sep = &quot;\n&quot;)</code></pre>
<pre><code>## ---
## title: &quot;R Notebook Stub&quot;
## output: html_notebook
## ---
## 
## ```{r chunk-one}
## print(&quot;Hello, World!&quot;)
## ```</code></pre>
<p>Let’s try rendering this document with a custom output source, so that we can inject custom output for the single chunk within the document. The output source function will accept:</p>
<ul>
<li><code>code</code>: The code within the current chunk,</li>
<li><code>context</code>: An environment containing active chunk options and other chunk information,</li>
<li><code>...</code>: Optional arguments reserved for future expansion.</li>
</ul>
<p>In particular, the context elements <code>label</code> and <code>chunk.index</code> can be used to help identify which chunk is currently being rendered.</p>
<pre class="r"><code>output_source &lt;- function(code, context, ...) {
  logo &lt;- file.path(R.home(), &quot;doc/html/logo.jpg&quot;)
  if (context$label == &quot;chunk-one&quot;) {
    return(list(
      rmarkdown::html_notebook_output_code(&quot;# R Code&quot;),
      paste(&quot;Custom output for chunk:&quot;, context$chunk.index),
      rmarkdown::html_notebook_output_code(&quot;# R Logo&quot;),
      rmarkdown::html_notebook_output_img(logo)
    ))
  }
}</code></pre>
<p>We can pass our <code>output_source</code> along as part of the <code>output_options</code> list to <code>rmarkdown::render()</code>.</p>
<pre class="r"><code>output_file &lt;-
  rmarkdown::render(rmd_stub,
                    output_options = list(output_source = output_source),
                    quiet = TRUE)</code></pre>
<p>We’ve now generated an R Markdown notebook. Opening <a href="notebook/r-notebook-stub.nb.html">this document</a> in a web browser will show that the <code>output_source</code> function has effectively side-stepped evaluation of code within that chunk, and instead returned the injected result:</p>
</div>
<div id="implementing-output-sources" class="section level2">
<h2>Implementing Output Sources</h2>
<p>In general, you can provide regular R output in your output source function, but <code>rmarkdown</code> also provides a number of endpoints for insertion of custom HTML content. These are documented within <code>?html_notebook_output</code>.</p>
<p>Using these functions ensures that you produce an R Notebook that can be opened in R frontends (e.g. RStudio).</p>
</div>
<div id="parsing-r-notebooks" class="section level2">
<h2>Parsing R Notebooks</h2>
<p>The <code>rmarkdown::parse_html_notebook()</code> function provides an interface for recovering and parsing an HTML notebook.</p>
<pre class="r"><code>parsed &lt;- rmarkdown::parse_html_notebook(output_file)
str(parsed)</code></pre>
<pre><code>## List of 4
##  $ source     : chr [1:187] &quot;&lt;!DOCTYPE html&gt;&quot; &quot;&quot; &quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&quot; &quot;&quot; ...
##  $ rmd        : chr [1:8] &quot;---&quot; &quot;title: \&quot;R Notebook Stub\&quot;&quot; &quot;output: html_notebook&quot; &quot;---&quot; ...
##  $ header     : chr [1:68] &quot;&lt;head&gt;&quot; &quot;&quot; &quot;&lt;meta charset=\&quot;utf-8\&quot;&gt;&quot; &quot;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=utf-8\&quot; /&gt;&quot; ...
##  $ annotations:List of 12
##   ..$ :List of 4
##   .. ..$ row  : int 144
##   .. ..$ label: chr &quot;text&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 145
##   .. ..$ label: chr &quot;text&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 146
##   .. ..$ label: chr &quot;chunk&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 147
##   .. ..$ label: chr &quot;source&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 149
##   .. ..$ label: chr &quot;source&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 150
##   .. ..$ label: chr &quot;output&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta :List of 1
##   .. .. ..$ data: chr &quot;Custom output for chunk: 1\n&quot;
##   ..$ :List of 4
##   .. ..$ row  : int 152
##   .. ..$ label: chr &quot;output&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 153
##   .. ..$ label: chr &quot;source&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 155
##   .. ..$ label: chr &quot;source&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 156
##   .. ..$ label: chr &quot;plot&quot;
##   .. ..$ state: chr &quot;begin&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 158
##   .. ..$ label: chr &quot;plot&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL
##   ..$ :List of 4
##   .. ..$ row  : int 159
##   .. ..$ label: chr &quot;chunk&quot;
##   .. ..$ state: chr &quot;end&quot;
##   .. ..$ meta : NULL</code></pre>
<p>This interface can be used to recover the original <code>.Rmd</code> source, and also (with some more effort from the front-end) the ability to recover chunk outputs from the document itself.</p>
</div>



<!-- bizible -->
<script type="text/javascript" src="//cdn.bizible.com/scripts/bizible.js" async=""></script>


<!-- disqus -->
  <div id="disqus_thread" style="margin-top: 45px;"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rmarkdown'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
